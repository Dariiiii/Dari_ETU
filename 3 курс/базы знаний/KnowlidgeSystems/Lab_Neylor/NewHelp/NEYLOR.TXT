Машина вывода Криса Нейлора    База знаний.
 Предметная область - медицина.
 Будем использовать две разновидности формата  для  представления
знаний.
 В первом формате храняться знания о конкретных заболеваниях:
 <ч.с.> < P >{(j p+ p-)} < название болезни >, где
 Р - априорная вероятность того,что это заболевание имеется у взя-
      того наугад человека ;
ч.с. - число применяемых симптомов, которые могут быть использованиы либо как
       признак этой болезни , либо как противоречащий ей признак .
 Далее записывается ряд троек,соответствующий  каждому  из  таких
применяемых симптомов :
 j - номер симптома ;
 p+ - вероятность того ,что этот симптом  будет  наблюдаться  при
      условии , что у пациента имеется рассматриваемое заболевание ;
 p- - вероятность того ,  что он наблюдается при  условии  отсут-
      ствии у пациента ланной болезни .
Второй формат содержит следующие данные :
 <номер симптома > <название симптома > <вопрос,  который следует
                                   задать относительно этого симптома >

Пример представления данных:

  Грипп  0.001 , 2 ,  1,1,0.01,   2,0.9,0.1
  1, температура , Есть ли у Вас высокая температура ?
  2, насморк , Есть ли у Вас насморк ?

Теорема Байеса.
 P(H) - априорная вероятность H при отсутствии каких-либо  свиде-
        тельств ;
 P( H | E ) - апостериорная вероятность H при наличии Е ;

                     P(H & E)                         P(E & H)
    P(H|E) = ----------           P(E|H) = ----------
                      P( E )                              P( H )

После преобразования этих формул получаем :

                        P ( E|H ) P(H)
       P(H|E) = ---------------    , где
                         P( E )

 P(E )= P(E|H)P(H)  + P(E|H~)P(H~) .

После длительных рассуждений записывается формула следующего вида:
             __
   P(E) = >   P(E|Hi) P(Hi)
             ~~
Свяжем полученные результаты с нашей базой знаний  :
    P(E|H) = p+  ;    P(E|H~) = p- ;
    P(H) = P  ,
воспользуясь этими обозначениями , получим :
                        p+ P
       P(H|E) = ----------
                      Pp+ + (1-P)p-
      
                      (1-p+)P
       P(H|E~) = -----------
                   1-Pp+-p-(1-P)

Здесь начинают проявляться достоинства байесовского метода.Перво-
начально P(H) было равно P ,  которое хранилось в нашей базе зна-
ний ,  но,  вычислив P(H|E), то есть задав  вопрос  о  наличии  у
больного высокой температуры ,  мы  можем  забыть  первоначальную
P(H) и воспользоваться P(H|E) как обновленным значением P(H), та-
ким образом весь процесс можно повторять каждый раз ,   несколько
уменьшая или увеличивая вероятность заболевания,при этом мы всег-
да обращаемя к  одной и той же формуле.

  Критерий выработки решений.

Можно заставить систему напечатать на выходе все гипотезы с  ука-
занием их вероятностей, но обычно этого не делается.
 Можно установить два порога для вероятности гипотезы - верхний и
нижний. Если вероятность превосходит верхний порог ,  то  гипотеза
принимается как основная для возможного заключения; если она ока-
зывается ниже нижнего порога,то она отвергается как неправильная.
Благодаря этому система способна при  выводе  проявлять  разумное
поведение.

     Неопределенность, заключенная в реакции пользователя.

 Если прользователь не уверен в ответе , то ему предлагается дать
ответ по шкале от -5 до 5 ,  при этом -5  означает  отрицательный
ответ , а 5 - положительный.  Апостериорная вероятноть вычисляет-
ся как функция от  ответа:

  	 	   Организация вывода.

Есть прямой и обратный вывод.Существует  третий  подход  к  общей
проблеме вывода: Какой вопрос следует задать в следующую очередь ?
 При этом подходе вводятся оценки свидетельств и его называют кос-
венной цепочкой рассуждений.Он сводится к тому,  что каждому эле-
менту доказательства приписывается цена,  отражающая его  роль  в
процессе вывода, и в первую очередь задается тот вопрос,  для ко-
торого цена - наибольшая.
 Интуитивно этот подход представляется разумным,  так как система
задает те вопросы, которые ей кажутся важными , постоянно модифи-
цируя свои представления по мере поступления ответов.
 Проблема состоит в том,как выделить важный  вопрос.В  простейшем
случае можно вычислить цену каждого свидетельства как полную сум-
му максимального изменения вероятностей , к которой может привес-
ти такое свидетельство:
           n
          __                                 _
   ЦС = >  | P(Hi|E) - P(Hi| E ) |   (*)
          ~~
          i=1
Цена свидетельства вычисляется для  каждого  свидетельства  E  из
нашей базы знаний, затем система может найти максимальную   ЦС  и
потребовать информацию для соответствующего свидетельства .
Итак,  Вы вызываете свой собственный метод и весьма грубо  оцени-
ваете, что он даст ,  если он не разваливается на Ваших глазах,то
по-видимому , этот метод вполне подходит.

			  Выработка заключений.

 С любой гипотезой (правилом) связано пять величин, каждая из кото-
рых является вероятностью.
 P(H)- текущая оцениваемая вероятность того, что данная гипотеза
       является истинной;
 P(max)- текущая максимальная вероятномть для данной  гипотезы  ,
       которая могла бы быть достигнута ,  если бы все оставшиеся
       были бы в ее пользу;
 P(min) - текущая минимальная вероятность  для  данной  гипотезы,
       которая могла бы быть достигнута,  если бы все  оставшиеся
       свидетельства были бы против этой гипотезы;
 M1 -  критерий верхнего порога для принятия  конкретной  гипоте-
       зы,вычисляется как некая пропорциональная от P(max)  вели-
       чина еще до того,как начинается сбор свидетельств;
 M2 -  критерий нижнего порогадля отказа от конкретной  гипотезы,
       пропорционален либо P(max) , либо P(min) , вычисляется еще
       до того,как начинается сбор свидетельств.


			Описание алгоритма.

   1. Для каждой гипотезы найти априорную вероятность путем прос-
  мотра базы знаний и извлечения P для каждой из гипотез ,    эта
  величина берется в качестве P(H) ,  которое в последствии будет
  уточняться.

  2. Для каждого свидетельства найти его цену.

  3. Из всех цен свидетельств (ЦС) найти наибольшее,  указывающее
  на то свидетельство,которое может вызывать  наибольшнн  измене-
  ние вероятностей по всем рассматриваемым гипотезам.

  4.Расспросить пользователя по поводу этого свидетельства ,  ис-
  пользуя вопрос ,хранящийся  в  базе  знаний.Ответ  пользователя
  расположен по шкале -5.. 5

  5. При заданном ответе сделать пересчет для всех гипотез, в ко-
  торых упоминалось это свидетельство.

  6. Сделать пересчет цен для всех  свидетельств  с  тем,   чтобы
  учесть изменения вероятностей,  которые произошли в  результате
  ответа пользователя.

  7. Вычислить P(max) и P(min) ,  которые еще достижимы для каж-
  дой гипотезы.

  8. Найти наибольший из возможных минимумов для этих гипотез.

  9. Проверить,  существует ли гипотеза,   максимальное  значение
  P(H) для которой превышает полученный  максимум  из  минимумов;
  если существует,то перейдти на шаг 3 и задать другои  вопрос  ,
  если нет, то существует наиболее вероятный результат, который и
  следует выдать пользователю.

  10. Вызвать из системы резюмирующую программу,  которая в  ходе
  своей работы сообщит пользователю подробное описание выводов  ,
  которые были проделаны системой.
